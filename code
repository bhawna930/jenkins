success {
            
            script {
               
                def powershellCommand = """
                    \$SMTPServer = "smtp.gmail.com"
                    \$SMTPFrom = "bhawnasharma5779@gmail.com"
                    \$SMTPTo = "bhawnasharma5779@gmail.com"
                    \$SMTPSubject = "GREAT SUCCESS "
                    \$SMTPBody = "Pipeline is executed successfully"
                    \$SMTPUsername = "bhawnasharma5779@gmail.com"
                    \$SMTPPassword = "epjo wvlz hmfu aiie"
    
                    Send-MailMessage -From \$SMTPFrom -to \$SMTPTo -Subject \$SMTPSubject -Body \$SMTPBody -SmtpServer \$SMTPServer -UseSsl -Port 587 -Credential (New-Object System.Management.Automation.PSCredential \$SMTPUsername, (ConvertTo-SecureString -AsPlainText \$SMTPPassword -Force))
                """
                powershell(powershellCommand)
            }
            
            echo 'GREAT SUCCESS!'
        }
        failure {
           
            script {
               
                def powershellCommand = """
                    \$SMTPServer = "smtp.gmail.com"
                    \$SMTPFrom = "bhawnasharma5779@gmail.com"
                    \$SMTPTo = "bhawnasharma5779@gmail.com"
                    \$SMTPSubject = "FAILURE"
                    \$SMTPBody = "Pipeline failed to execute, errors occured"
                    \$SMTPUsername = "bhawnasharma5779@gmail.com"
                    \$SMTPPassword = "epjo wvlz hmfu aiie"
    
                    Send-MailMessage -From \$SMTPFrom -to \$SMTPTo -Subject \$SMTPSubject -Body \$SMTPBody -SmtpServer \$SMTPServer -UseSsl -Port 587 -Credential (New-Object System.Management.Automation.PSCredential \$SMTPUsername, (ConvertTo-SecureString -AsPlainText \$SMTPPassword -Force))
                """
                powershell(powershellCommand)
            }
            echo 'Build FAILED, CHECK.'
        }
